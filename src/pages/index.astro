---
import { Icon } from 'astro-icon/components';
import { Image } from 'astro:assets';

import Centered from '@/layouts/Centered.astro';
import RainbowTag from '@/components/RainbowTag.astro';
import { GradientBlobs } from '@/components/react/GradientBlobs';
import SocialLinks from '@/components/SocialLinks.astro';
import { PROFILE } from '@/constants/profile';

import AvatarSrc from '@/assets/images/avatar.png';
---

<script>
  const btnSwap = document.querySelector('#btn-swap-gradient');
  if (btnSwap) {
    btnSwap.addEventListener('click', function () {
      window.postMessage('swap_gradient');
    });
  }
</script>

<Centered
  metadata={{
    title: 'Homepage',
  }}
>
  <article class="flex flex-col">
    <div
      class="relative flex min-h-[calc(100vh-100px)] flex-col-reverse items-center justify-center gap-8 overflow-hidden py-8 md:flex-row"
    >
      <div class="flex max-w-[300px] flex-col gap-2">
        <RainbowTag emoji="ðŸ’…" text="Frontend Web Developer" />
        <p>{PROFILE.TAGLINE}</p>
      </div>
      <div class="relative h-[250px] w-[250px]">
        <Image
          width={250}
          src={AvatarSrc}
          alt="MZP Avatar"
          class="relative z-10 transition-all duration-500"
          style="border-radius: 77% 23% 70% 30% / 48% 36% 64% 52%;"
        />
        <GradientBlobs
          className="absolute top-0 z-0 h-[250px] w-[250px] opacity-90"
          client:only="react"
        />
        <button
          role="button"
          type="button"
          class="z-5 absolute right-0 top-[165px] rounded bg-yellow-400 p-1 text-black focus:bg-yellow-500 focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:ring-offset-2 dark:focus:bg-base-200"
          id="btn-swap-gradient"
          title="Shuffle gradient"
          aria-label="Shuffle gradient"
        >
          <Icon name="tabler:refresh" class="h-4 w-4" />
        </button>
      </div>
      <div class="border-b-4 border-dashed border-yellow-400 p-8">
        <SocialLinks />
        <h1 class="mb-2 mt-4 font-serif text-5xl text-yellow-400">Irfan Maulana</h1>
        <p class="text-lg font-semibold">Call me "mas ipan"</p>
      </div>

      <svg
        aria-hidden="true"
        class="pointer-events-none absolute inset-0 top-0 -z-[1] h-full w-full fill-neutral-400/80 [mask-image:radial-gradient(500px_circle_at_center,white,transparent)]"
      >
        <defs>
          <pattern
            id=":r0:"
            width="16"
            height="16"
            patternUnits="userSpaceOnUse"
            patternContentUnits="userSpaceOnUse"
            x="0"
            y="0"
          >
            <circle id="pattern-circle" cx="1" cy="1" r="1"></circle>
          </pattern>
        </defs>
        <rect width="100%" height="100%" stroke-width="0" fill="url(#:r0:)"></rect>
      </svg>
    </div>
  </article>
</Centered>
