---
import { Image } from 'astro:assets';

import Link from '@/components/Link.astro';
import { DRAFT_TEXT } from '@/constants/data';
import { IMAGE_SIZES } from '@/constants/image';
import { ROUTES } from '@/constants/routes';
import { cn } from '@/utils/styles';

import type { Post } from '@/types/post';

export interface Props {
  post: Post;
}

const { post } = Astro.props;
const { data, slug } = post;
const { title, heroImage, heroAlt, description, draft } = data;
---

<div>
  <Image
    {...IMAGE_SIZES.RESPONSIVE.POST_CARD}
    src={heroImage}
    alt={heroAlt}
    class={cn(
      'hover:transform-perspective max-h-44 rounded-xl object-cover transition-transform duration-300'
    )}
  />
  <h4 class="b-h4 mb-2 mt-3 line-clamp-2 break-words">
    <Link
      variant="link-heading"
      href={`${ROUTES.BLOG}/${slug}`}
      class="hover:underline hover:decoration-wavy hover:underline-offset-2"
    >
      {title}
      {draft && <sup class="ml-1 text-sm text-red-500">{DRAFT_TEXT}</sup>}
    </Link>
  </h4>
  {description && <p class="line-clamp-2 text-base">{description}</p>}
</div>
